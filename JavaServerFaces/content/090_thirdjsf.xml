<section id="thirdjsf">
== JSF application with a controller
	 We will now extend the example from the previous chapter to a
		math trainer. The system will propose two number and the user must
		multiply both values and input the result.
	 This JSF application will use a controller which handles the JSF
		logic. This will allow you to create a domain model without
		application logic.
	
		<tip> In general it is considered as a good design practice to keep
			the model independently from the application logic.
	
	This example will also demonstrate the usage of dependency
		injection in JSF.
	<section id="thirdjsf_project">
=== Create JSF Project
		 Create a new Dynamic Web Project "de.vogella.jsf.card".

	<section id="thirdjsf_model">
=== Domain model
		 Create a new package de.vogella.jsf.card.model and the
			following class.
		
			<programlisting>
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
					parse="text" href="../examples/thirdjsf/Card.java[]
----
		

	<section id="thirdjsf_controller">
=== Controller
		 Create the following class CardController.
		
			<programlisting>
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
					parse="text" href="../examples/thirdjsf/CardController.java[]
----
		
		 This class has a field resultPanel. This field will later get
			connected to a UIComponent (panel) from the JSP.

	<section id="thirdjsf_managedbeans">
=== Register your managed beans- Dependency injection
		 Double-click on faces-config.xml and select the tab
			"ManagedBeans". Register the classes "CardController" and "Card" as
			managed beans. The scope of card will be set to none as it will be
			inserted into the ControllerCard via dependency injection. In the
			initialization tab maintain the data as displayed in the screenshot.
			The value #{card} refers to the  managed bean "card".
		
		
image::controller10.gif[]
					
				</imageobject>
			</mediaobject>
		
		The generated XML code should look like the following (you
			see
			this if you select the tab "Source".
		
			<programlisting>
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
					parse="text" href="../examples/thirdjsf/managedBean.txt[]
----
		

	<section id="thirdjsf_resourcebundle">
=== Resource bundle for messages
		 Create the following file "messages.properties" in your source
			folder under the package "de.vogella.jsf.card".
		
			<programlisting>
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
					parse="text" href="../examples/thirdjsf/messages.properties[]
----
		

	<section id="thirdjsf_firstjsp">
=== JavaServer Page with JSF components
		 Create a new JSP page "Trainer.jsp" and change the code to the
			following:
		
			<programlisting>
				<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
					parse="text" href="../examples/thirdjsf/Trainer.jsp[]
----
		
		 From the previously examples you should be able to read most of
			the fields. What is new is that is use now the binding. Binding
			allows to bind certain UIControls to a managed bean. This way be bind
			the panel for the result to the controller. The controller can then
			set the rendered attribute of this UIControl depending on the user
			settings.

	<section id="thirdjsf_run">
=== Run your webapplication
		 To run your webapplication, select Trainer.jsp, right
			mouse-click- >run as -> run on server.
		
image::controller30.gif[]
					
				</imageobject>
			</mediaobject>
		

